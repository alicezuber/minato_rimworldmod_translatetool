<Window x:Class="RimWorldTranslationTool.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="RimWorld 翻譯工具" Height="700" Width="1200"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        
        <!-- 目錄選擇區 -->
        <StackPanel Grid.Row="0" Grid.ColumnSpan="3" Margin="0,0,0,10">
            <TextBlock Text="模組目錄路徑:" Margin="0,0,0,5"/>
            <StackPanel Orientation="Horizontal">
                <TextBox x:Name="FolderPathTextBox" Width="600" Height="30" 
                         Text="{Binding FolderPath, UpdateSourceTrigger=PropertyChanged}"
                         TextChanged="FolderPathTextBox_TextChanged"/>
                <Button x:Name="BrowseButton" Content="瀏覽..." Width="80" Height="30" 
                        Margin="5,0,0,0" Click="BrowseButton_Click"/>
                <Button x:Name="ScanButton" Content="掃描模組" Width="80" Height="30" 
                        Margin="5,0,0,0" Click="ScanButton_Click"/>
                <TextBlock Text="本次遊玩版本:" Margin="20,0,5,0" VerticalAlignment="Center"/>
                <ComboBox x:Name="GameVersionComboBox" Width="120" Height="30" 
                          SelectionChanged="GameVersionComboBox_SelectionChanged"/>
                <TextBlock Text="ModsConfig.xml:" Margin="20,0,5,0" VerticalAlignment="Center"/>
                <Button x:Name="SelectModsConfigButton" Content="選擇檔案" Width="80" Height="30" 
                        Click="SelectModsConfigButton_Click"/>
                <TextBlock x:Name="ModsConfigPathText" Text="未選擇" Margin="5,0,0,0" VerticalAlignment="Center"/>
                <TextBlock x:Name="ModsConfigStatusText" Text="" Margin="10,0,0,0" VerticalAlignment="Center" Foreground="Gray"/>
            </StackPanel>
            <!-- 進度條 -->
            <StackPanel Orientation="Vertical" Margin="0,5,0,0" Visibility="Collapsed" x:Name="ProgressPanel">
                <ProgressBar x:Name="ScanProgressBar" Height="20" Minimum="0" Maximum="100" Value="0"/>
                <TextBlock x:Name="ProgressTextBlock" Text="準備掃描..." Margin="0,2,0,0"/>
            </StackPanel>
        </StackPanel>
        
        <!-- 模組列表 -->
        <DataGrid x:Name="ModsDataGrid" Grid.Row="1" Grid.Column="0" AutoGenerateColumns="False" 
                  SelectionMode="Single" IsReadOnly="True"
                  GridLinesVisibility="Horizontal" HeadersVisibility="Column"
                  MouseRightButtonDown="ModsDataGrid_MouseRightButtonDown"
                  SelectedItem="{Binding SelectedMod}">
            <DataGrid.Columns>
                <DataGridTextColumn Header="模組名稱" Binding="{Binding Name}" Width="250"/>
                <DataGridTextColumn Header="作者" Binding="{Binding Author}" Width="120"/>
                <DataGridTextColumn Header="版本" Binding="{Binding SupportedVersions}" Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{Binding VersionCompatibilityColor}"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="繁中翻譯" Binding="{Binding HasChineseTraditional}" Width="80">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{Binding HasChineseTraditionalColor}"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="簡中翻譯" Binding="{Binding HasChineseSimplified}" Width="80">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{Binding HasChineseSimplifiedColor}"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="翻譯補丁" Binding="{Binding HasTranslationPatch}" Width="80">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{Binding HasTranslationPatchColor}"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="可翻譯" Binding="{Binding CanTranslate}" Width="60">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Foreground" Value="{Binding CanTranslateColor}"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>
        
        <!-- 分隔線 -->
        <GridSplitter Grid.Row="1" Grid.Column="1" Width="5" HorizontalAlignment="Center" VerticalAlignment="Stretch"/>
        
        <!-- 預覽框 -->
        <ScrollViewer Grid.Row="1" Grid.Column="2" VerticalScrollBarVisibility="Auto">
            <StackPanel x:Name="PreviewPanel" Margin="10,0,0,0">
                <TextBlock Text="模組預覽" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
                
                <!-- 預覽圖片 -->
                <Border BorderBrush="Gray" BorderThickness="1" Margin="0,0,0,10" Background="White">
                    <Image x:Name="PreviewImage" Width="280" Height="280" 
                           Stretch="Uniform" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                </Border>
                
                <!-- 模組資訊 -->
                <StackPanel x:Name="ModInfoPanel" Visibility="Collapsed">
                    <TextBlock x:Name="ModNameText" FontSize="14" FontWeight="Bold" Margin="0,0,0,5"/>
                    <TextBlock x:Name="ModAuthorText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="ModPackageIdText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="ModVersionText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="ModFolderText" FontSize="12" Margin="0,0,0,10"/>
                    
                    <!-- 翻譯狀態 -->
                    <TextBlock Text="翻譯狀態" FontSize="14" FontWeight="Bold" Margin="0,10,0,5"/>
                    <TextBlock x:Name="ChineseTraditionalText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="ChineseSimplifiedText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="TranslationPatchText" FontSize="12" Margin="0,0,0,3"/>
                    <TextBlock x:Name="CanTranslateText" FontSize="12" Margin="0,0,0,10"/>
                    
                    <!-- 翻譯補丁列表 -->
                    <TextBlock x:Name="TranslationPatchesTitle" Text="翻譯補丁" FontSize="14" FontWeight="Bold" 
                               Visibility="Collapsed" Margin="0,10,0,5"/>
                    <StackPanel x:Name="TranslationPatchesList" Visibility="Collapsed"/>
                </StackPanel>
                
                <!-- 空狀態 -->
                <TextBlock x:Name="EmptyStateText" Text="選擇一個模組查看詳細資訊" 
                           FontSize="12" Foreground="Gray" HorizontalAlignment="Center" Margin="0,50,0,0"/>
            </StackPanel>
        </ScrollViewer>
        
        <!-- 狀態列 -->
        <StatusBar Grid.Row="2" Grid.ColumnSpan="3" Height="25" Margin="0,10,0,0">
            <StatusBarItem>
                <TextBlock x:Name="StatusTextBlock" Text="準備就緒"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
